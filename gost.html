<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ГОСТ 2708-75</title>
    <script src="telega.js"></script>
    <style>
        :root { --bg: #0f0f0f; --card: #1a1a1a; --accent: #FF9500; --text: #ffffff; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 15px; }
        
        .header { display: flex; align-items: center; margin-bottom: 15px; }
        .back-btn { font-size: 34px; color: var(--accent); cursor: pointer; padding-right: 15px; line-height: 1; }
        
        .controls { display: flex; gap: 10px; margin-bottom: 15px; position: sticky; top: 0; z-index: 100; background: var(--bg); padding-bottom: 10px; }
        select { flex: 1; padding: 14px; background: var(--card); border: 1px solid #333; color: white; border-radius: 12px; font-size: 16px; outline: none; -webkit-appearance: none; }
        select:focus { border-color: var(--accent); }

        .result-card { background: var(--card); padding: 20px; border-radius: 18px; text-align: center; margin-bottom: 20px; border: 1px solid #222; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .vol-value { font-size: 48px; font-weight: 900; color: var(--accent); }
        
        .table-wrapper { width: 100%; overflow-x: auto; background: var(--card); border-radius: 14px; border: 1px solid #222; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th { background: #222; color: var(--accent); padding: 12px 8px; font-weight: bold; border-bottom: 1px solid #333; }
        td { padding: 10px 8px; border: 1px solid #222; text-align: center; color: #888; }
        
        .row-label { font-weight: bold; color: white; background: #1e1e1e; position: sticky; left: 0; z-index: 5; }
        .highlight { background: var(--accent) !important; color: black !important; font-weight: bold; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="back-btn" onclick="window.history.back()">‹</div>
        <h2 style="margin:0">ГОСТ 2708-75</h2>
    </div>

    <div class="controls">
        <select id="select-d" onchange="updateCalc()"><option value="">Диаметр (см)</option></select>
        <select id="select-l" onchange="updateCalc()"><option value="">Длина (м)</option></select>
    </div>

    <div class="result-card">
        <div id="res-vol" class="vol-value">0.000</div>
        <div style="font-size:12px; color:#555; text-transform: uppercase; letter-spacing: 1px;">кубических метра</div>
    </div>

    <div class="table-wrapper">
        <table id="gost-table">
            <thead><tr id="table-head"><th class="row-label">см \ м</th></tr></thead>
            <tbody id="table-body"></tbody>
        </table>
    </div>

<script>
    const tg = window.Telegram.WebApp;
    const lengths = [3.0, 3.5, 4.0, 4.5, 5.0, 5.5, 6.0, 6.5];
    const baseGost = { 10: [0.031, 0.037, 0.043, 0.050, 0.057, 0.065, 0.074, 0.082], 12: [0.045, 0.054, 0.063, 0.070, 0.085, 0.100, 0.110, 0.120], 14: [0.062, 0.075, 0.088, 0.100, 0.120, 0.140, 0.150, 0.170], 16: [0.070, 0.090, 0.110, 0.130, 0.160, 0.180, 0.190, 0.220], 18: [0.100, 0.120, 0.140, 0.170, 0.190, 0.220, 0.240, 0.280], 20: [0.120, 0.150, 0.170, 0.200, 0.230, 0.260, 0.300, 0.340], 22: [0.150, 0.180, 0.210, 0.240, 0.280, 0.320, 0.360, 0.410], 24: [0.180, 0.210, 0.250, 0.290, 0.330, 0.380, 0.430, 0.480], 26: [0.210, 0.250, 0.290, 0.340, 0.390, 0.440, 0.500, 0.560], 28: [0.250, 0.290, 0.340, 0.400, 0.450, 0.510, 0.580, 0.650], 30: [0.280, 0.340, 0.390, 0.460, 0.520, 0.590, 0.670, 0.740], 32: [0.330, 0.380, 0.450, 0.520, 0.590, 0.670, 0.760, 0.840], 34: [0.370, 0.430, 0.510, 0.580, 0.660, 0.750, 0.850, 0.950], 36: [0.410, 0.490, 0.570, 0.650, 0.740, 0.840, 0.950, 1.060], 38: [0.460, 0.540, 0.630, 0.730, 0.830, 0.940, 1.060, 1.180], 40: [0.510, 0.600, 0.700, 0.810, 0.920, 1.040, 1.170, 1.300], 42: [0.560, 0.660, 0.770, 0.890, 1.010, 1.140, 1.280, 1.430], 44: [0.620, 0.730, 0.850, 0.980, 1.110, 1.250, 1.410, 1.570], 46: [0.680, 0.800, 0.930, 1.070, 1.210, 1.370, 1.540, 1.710], 48: [0.740, 0.870, 1.020, 1.170, 1.320, 1.490, 1.680, 1.860], 50: [0.810, 0.950, 1.100, 1.270, 1.440, 1.620, 1.820, 2.020] };

    function init() {
        tg.ready();
        const dSelect = document.getElementById('select-d');
        const lSelect = document.getElementById('select-l');
        const tHead = document.getElementById('table-head');
        const tBody = document.getElementById('table-body');

        lengths.forEach(l => {
            tHead.innerHTML += `<th>${l}м</th>`;
            lSelect.innerHTML += `<option value="${l}">${l} м</option>`;
        });

        for (let d = 10; d <= 50; d++) {
            dSelect.innerHTML += `<option value="${d}">${d} см</option>`;
            let row = `<tr><td class="row-label">${d}</td>`;
            lengths.forEach((l, idx) => {
                let val = baseGost[d] ? baseGost[d][idx] : ((baseGost[d-1][idx] + baseGost[d+1][idx]) / 2).toFixed(3);
                row += `<td id="cell-${d}-${l}">${val}</td>`;
            });
            tBody.innerHTML += row + `</tr>`;
        }
    }

    function updateCalc() {
        const d = document.getElementById('select-d').value;
        const l = document.getElementById('select-l').value;
        document.querySelectorAll('td').forEach(td => td.classList.remove('highlight'));
        
        if (d && l) {
            tg.HapticFeedback?.impactOccurred('medium');
            const cell = document.getElementById(`cell-${d}-${l}`);
            if (cell) {
                cell.classList.add('highlight');
                document.getElementById('res-vol').innerText = cell.innerText;
                cell.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
    }
    
    window.onload = init;
</script>
</body>
</html>
